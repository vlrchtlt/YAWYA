<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAWYA - Inclusive Fashion Technology</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
    <section class="logo">
        <img src="images/Logo.svg" alt="YAWYA Logo">
        <p>You Are Who You Are</p>
    </section>

   
    <div id="popup-container">
        <div id="loading-popup">
            <div class="popup-content">
                <p>Submitting...</p>
            </div>
        </div>
        <div id="response-popup">
            <div class="popup-content">
                <span class="close-button" onclick="closePopup()">Ã—</span>
                <p id="response-message"></p>
            </div>
        </div>
    </div>

    <script>
        function openForm(formType) {
            document.getElementById("form-title").innerText = getFormTitle(formType);
            document.getElementById("form-type").value = formType;
            document.getElementById("overlay").style.display = "block";
            document.getElementById("form-popup").style.display = "block";
        }

        function closeForm() {
            document.getElementById("overlay").style.display = "none";
            document.getElementById("form-popup").style.display = "none";
        }

        function getFormTitle(formType) {
            switch (formType) {
                case "demo":
                    return "Request a Demo";
                case "collaborations":
                    return "Learn More About Collaborations";
                case "info":
                    return "Request More Information";
                default:
                    return "Contact Us";
            }
        }

        document.getElementById("popup-form").addEventListener("submit", function(event) {
            event.preventDefault(); 

            const name = document.getElementById("form-name").value;
            const email = document.getElementById("form-email").value;
            const formType = document.getElementById("form-type").value;

            showLoadingPopup();

            sendDataToGoogleSheet(name, email, formType)
              .then(response => {
                showResponsePopup(response.message); 
              })
              .catch(error => {
                console.error("Error submitting form:", error);
                showResponsePopup("An error occurred while submitting the form. Please try again later.");
              });
        });

        async function sendDataToGoogleSheet(name, email, formType) {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwSCI-fK0hHspL7wNmoisSqLvJcyK7HO79Fb4tjlkQ6qjUd3RVQ6SKUQRIvyb4TFrHH/exec';
            const formData = new FormData();
            formData.append('name', name);
            formData.append('email', email);
            formData.append('formType', formType);

            const response = await fetch(scriptURL, {
                method: 'POST',
                body: formData
            });

            if (!response.ok) {
                throw new Error(`Error submitting form: ${response.status}`);
            }

            return response.json();
        }

        function showLoadingPopup() {
            document.getElementById("popup-container").style.display = "block";
            document.getElementById("loading-popup").style.display = "block";
        }

        function showResponsePopup(message) {
            document.getElementById("loading-popup").style.display = "none";
            document.getElementById("response-popup").style.display = "block";
            document.getElementById("response-message").innerText = message;
            setTimeout(closePopup, 1500); 
        }

        function closePopup() {
            document.getElementById("popup-container").style.display = "none";
            document.getElementById("response-popup").style.display = "none";
        }

        window.addEventListener('DOMContentLoaded', () => {
            const navbar = document.querySelector('.navbar');

            setTimeout(() => {
                navbar.classList.add('visible'); 
            }, 1000);

            const observer = new IntersectionObserver(entries => {
                if (entries[0].isIntersecting) {
                navbar.classList.add('visible'); 
                } else {
                navbar.classList.remove('visible');
                }
            });

            observer.observe(document.querySelector('.logo')); 
        });

        document.getElementById("newsletter-form").addEventListener("submit", function(event) {
            event.preventDefault();  

            const name = document.querySelector("#newsletter-form input[name='name']").value;
            const email = document.querySelector("#newsletter-form input[name='email']").value;

            sendDataToGoogleSheet(name, email, "newsletter")
                .then(() => {
                    console.log("Newsletter subscription successful!");
                })
                .catch(error => {
                    console.error("Error submitting form:", error);
                });
        });
    </script>
</body>
</html>